[client]
port                            = 3306
socket                          = /tmp/mysql.sock

[mysql]
prompt                          = \u@\h [\d]>\_
no_auto_rehash

[mysqld]
user                            = mysql
port                            = 3306
socket                          = /tmp/mysql.sock
bind-address                    = 127.0.0.1
basedir                         = /usr/local
datadir                         = /var/db/mysql
tmpdir                          = /var/db/mysql_tmpdir
replica-load-tmpdir             = /var/db/mysql_tmpdir
secure-file-priv                = /var/db/mysql_secure
log-bin                         = mysql-bin
log-output                      = TABLE
relay-log-recovery              = 1
slow-query-log                  = 1
server-id                       = 1
sync_binlog                     = 1
sync_relay_log                  = 1
binlog_cache_size               = 16M
binlog_expire_logs_seconds      = 2592000
default_password_lifetime       = 0
enforce-gtid-consistency        = 1
gtid-mode                       = ON
safe-user-create                = 1
lower_case_table_names          = 1
explicit-defaults-for-timestamp = 1
myisam-recover-options          = BACKUP,FORCE
# Performance: Increased open files limit
open_files_limit                = 65535
# Performance: Increased table cache for better performance
table_open_cache                = 32768
table_definition_cache          = 16384
net_retry_count                 = 16384
key_buffer_size                 = 256M
max_allowed_packet              = 64M
long_query_time                 = 0.5
# Performance: Increased InnoDB buffer pool from 1G to 2G for better caching
innodb_buffer_pool_size         = 2G
# Performance: Enable multiple buffer pool instances for better concurrency
innodb_buffer_pool_instances    = 2
innodb_data_home_dir            = /var/db/mysql
innodb_log_group_home_dir       = /var/db/mysql
innodb_data_file_path           = ibdata1:128M:autoextend
innodb_temp_data_file_path      = ibtmp1:128M:autoextend
innodb_flush_method             = O_DIRECT
# Performance: Increased redo log capacity from 512M to 1G
innodb_redo_log_capacity        = 1G
innodb_log_buffer_size          = 16M
# Performance: Increased IO threads for better concurrent operations
innodb_write_io_threads         = 16
innodb_read_io_threads          = 16
innodb_autoinc_lock_mode        = 2
transaction_isolation           = READ-COMMITTED
mysql_native_password           = ON
# Performance: Additional optimizations for Nextcloud
innodb_flush_log_at_trx_commit  = 2
innodb_file_per_table           = 1
# Performance: Optimize query cache (disabled in MySQL 8.0+, but set for compatibility)
query_cache_type                = 0
query_cache_size                = 0
# Performance: Optimize connection handling
max_connections                 = 300
max_connect_errors              = 100000
# Performance: Thread cache for connection reuse
thread_cache_size               = 50
# Performance: Sort and join buffer optimizations
sort_buffer_size                = 4M
read_buffer_size                = 2M
read_rnd_buffer_size            = 8M
join_buffer_size                = 4M
# Performance: Temporary table settings
tmp_table_size                  = 128M
max_heap_table_size             = 128M

[mysqldump]
max_allowed_packet              = 256M
quote_names
quick
